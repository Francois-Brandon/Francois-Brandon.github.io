<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="../mystyle.css">
    <script type="text/javascript" src="js-topic4.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <title>Brandon Francois - Topic 1</title>
</head>
<body>
    <div id="nav-placeholder"></div>

    <script>
        $(function(){
        $("#nav-placeholder").load("../nav.html");
        });
    </script>
    
    <h1>Using AJAX to Consume a JSON Web Service</h1>
    <h3>What is AJAX?</h3>
    <p>AJAX stands for Asynchronous JavaScript And XML. It is not a programming language, but rather a technique to allow web pages to be updated asynchronously by exchanging data with a web server behind the scenes. The process starts after an event that triggers a request. An XMLHttpRequest object is created and a request is sent to the web server. The server will then process the HttpRequest, create a response, and send it back to the broswer. The response is then read and processed using JavaScript and the proper action can be taken. This action may be updating the page content using JavaScript.</p>
    <h3>XMLHttpRequest Object</h3>
    <p>The XMLHttpRequest object is the keystone of AJAX and the vehicle used to exchange data with the web server. </p>
    <h4>Methods</h4>
    <table id="xhr-methods" class="mytable">
        <tr>
            <th>Method</th>
            <th>Definition</th>
        </tr>
        <tr>
            <td>new XMLHttpRequest()</td>
            <td>This is used to create a new XMLHttpRequest object</td>
        </tr>
        <tr>
            <td>abort()</td>
            <td>This will cancel the current request</td>
        </tr>
        <tr>
            <td>getAllResponseHeaders()</td>
            <td>Returns all header information</td>
        </tr>
        <tr>
            <td>getResponseHeader()</td>
            <td>Returns specific header information</td>
        </tr>
        <tr>
            <td>open(method, url, async, user, pw)</td>
            <td>Used to specify the request
                <ul>
                    <li>method defines the type of request, either GET or POST</li>
                    <li>url defines the location of the file</li>
                    <li>async is either true for an asynchronous request, or false for a synchronous request</li>
                    <li>username (optional)</li>
                    <li>password (optional)</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td>send()</td>
            <td>Used to send the request to the server for GET requests</td>
        </tr>
        <tr>
            <td>send(string)</td>
            <td>Used to send the request to the server for POST requests</td>
        </tr>
        <tr>
            <td>setRequestHeader()</td>
            <td>Used to add a key/value pair to the request header</td>
        </tr>
    </table>
    
    <h4>Properties</h4>
    <table id="xhr-properties" class="mytable">
        <tr>
            <th>Property</th>
            <th>Definition</th>
        </tr>
        <tr>
            <td>onreadystatechange</td>
            <td>Defines a function to be called when the readyState property changes</td>
        </tr>
        <tr>
            <td>readyState</td>
            <td>Holds the status of the XMLHttpRequest.
                <ul>
                    <li>0: request not initialized</li>
                    <li>1: server connection established</li>
                    <li>2: request received </li>
                    <li>3: processing request </li>
                    <li>4: request finished and response is ready</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td>responseText</td>
            <td>Returns the response data as a string</td>
        </tr>
        <tr>
            <td>responseXML</td>
            <td>Returns the response data as XML data</td>
        </tr>
        <tr>
            <td>status</td>
            <td>Returns the status-number of a request</td>
        </tr>
        <tr>
            <td>statusText</td>
            <td>Returns the status-text</td>
        </tr>
    </table><br>
    
    <h3>Examples</h3>
    <p>The following example will make a request to https://jsonplaceholder.typicode.com/posts/1 for some generic data. The request state will update as the readyState property changes. The raw response will be displayed when it has been received.</p>
    <div class="codeex">
        <button id='sendrequest1' value='send1' onclick="getPost()">Send Request</button>
        <p>Raw Response: <code id="response1"></code></p>
        <p>Request State: <code id="state1"></code></p>
        <p>Response Status: <code id="status1"></code></p>
        
    </div><br>
    
    <p>This next example will make a request to https://jsonplaceholder.typicode.com/photos/1 for photo data. The response will be parsed and the image added to the page below.</p>
    <div class="codeex">
        <button id='sendrequest2' value='send2' onclick="getPhoto()">Send Request</button>
        <p>Raw Response: <code id="response2"></code></p>
        <p>Request State: <code id="state2"></code></p>
        <p>Response Status: <code id="status2"></code></p>
        <img id="image" src="">
        
    </div>
    
 </body>
</html>